apply plugin: 'groovy'
apply plugin: 'maven'

dependencies {
  compile gradleApi()
  compile localGroovy()
}

groovydoc {
  links = [
    new Groovydoc.Link('https://docs.gradle.org/current/javadoc/', 'org.gradle'),
    new Groovydoc.Link('https://docs.oracle.com/javase/8/docs/api/', 'java', 'javax'),
    new Groovydoc.Link('http://docs.groovy-lang.org/latest/html/api/', 'groovy')
  ]
}

version = 'v0.1.0'

task deploy(type: Upload) {
  configuration = configurations.archives
  repositories {
    mavenDeployer {
      repository(url: "file://$buildDir/maven")
      pom.version = project.version.charAt(0) == 'v' ? project.version.substring(1) : project.version
      pom.artifactId = 'gradle-plugin'
      pom.groupId = 'org.openstreetmap.josm'
    }
  }
}
